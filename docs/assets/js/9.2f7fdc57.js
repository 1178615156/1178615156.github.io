(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{294:function(a,s,t){a.exports=t.p+"assets/img/7896180-f0c0aff822af0bab.f77d6b37.png"},317:function(a,s,t){"use strict";t.r(s);var e=t(4),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h3",{attrs:{id:"现象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#现象"}},[a._v("#")]),a._v(" 现象")]),a._v(" "),s("p",[s("img",{attrs:{src:t(294),alt:"7896180-f0c0aff822af0bab.png"}})]),a._v(" "),s("p",[a._v("这个Access denied错误其实是cloudflare返回的，只要绕开cloudflare的校验就行。")]),a._v(" "),s("h3",{attrs:{id:"方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方案"}},[a._v("#")]),a._v(" 方案")]),a._v(" "),s("p",[a._v("使用cloudfare-warp能够绕开这个校验。 https://developers.cloudflare.com/warp-client/")]),a._v(" "),s("ul",[s("li",[a._v("准备一台国外的虚拟机")]),a._v(" "),s("li",[a._v("安装cloudfare-warp（ubuntu）")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" https://pkg.cloudflareclient.com/pubkey.gpg "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" gpg "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--yes")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--dearmor")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--output")]),a._v(" /usr/share/keyrings/cloudflare-warp-archive-keyring.gpg\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"deb [arch=amd64 signed-by=/usr/share/keyrings/cloudflare-warp-archive-keyring.gpg] https://pkg.cloudflareclient.com/ '),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("lsb_release "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-cs")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(' main"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tee")]),a._v(" /etc/apt/sources.list.d/cloudflare-client.list\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" update\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" cloudflare-warp "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" net-tools "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用socket代理模式")]),a._v("\nwarp-cli --accept-tos set-mode proxy \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置代理端口2080")]),a._v("\nwarp-cli --accept-tos set-proxy-port "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2080")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注册")]),a._v("\nwarp-cli --accept-tos register\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 连接")]),a._v("\nwarp-cli --accept-tos connect\n\n")])])]),s("ul",[s("li",[a._v("安装完后默认绑定到"),s("code",[a._v("127.0.0.1:2080")]),a._v("，如果需要再别的电脑上访问的话再配置个nginx。")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'EOF'"),s("span",{pre:!0,attrs:{class:"token bash punctuation"}},[a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /root/cloudfare-wrap-nginx.conf")]),a._v("\nworker_processes 1;\nevents {\n    use epoll;\n    worker_connections  65535;\n}\nstream {\n  server {\n    listen 1081;\n    proxy_pass 127.0.0.1:2080;\n  }\n}\nEOF")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/cloudfare-wrap-nginx.conf:/etc/nginx/nginx.conf "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" cloudfare-wrap-nginx nginx\n")])])]),s("p",[a._v("现在可以使用"),s("code",[a._v("<服务器IP>:1081")]),a._v("这个socks代理来访问"),s("code",[a._v("chat.openai.com")]),a._v("了")])])}),[],!1,null,null,null);s.default=r.exports}}]);